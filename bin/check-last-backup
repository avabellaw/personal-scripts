#!/bin/bash

# Checks to see whether there's been a backup in the last x minutes for executor gnome extension.

for arg in "$@"; do
    case $arg in
        folder=*)
            folder="${arg#*=}";
        ;;
        timeframe=*)
            TIMEFRAME_MINS="$args#*=}"
        ;;
    esac
done

if [[ -z $folder ]]; then
    echo "Set the folder var - folder=[snapshot folder]"
fi


if [[ -z $timeframe ]];
then
    TIMEFRAME_MINS=66 # Default check for backup in last 66 mins - accounts for hourly backup delay.
fi

if [ -n "$(find $BACKUP_DIR/$folder -maxdepth 1 -mmin -$TIMEFRAME_MINS)" ]; then echo "Last backup:" $(get-last-backup folder=$folder); else echo "No backup since: " $(get-last-backup folder=$folder)"<executor.css.red>"; fi
